

<style type="text/css">
  *{
    font-family: "Roboto", serif;
  }
  @import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap');
  .table td, .table tr, thead th{
    border:1px solid #eee;
    border-radius:2px;
  }
  .table td{
    padding:10px;
  }
</style>

  <h1>Data pulled from Coin Gecko</h1>
  <table class='table table-bordered'>
    <thead>
      <th></th>
      <th>Name</th>
      <th>Symbol</th>
      <th>Price</th>
    </thead>
    <tbody id='output'>
    </tbody>
  </table>

  <script>
    // Fetch cryptocurrency data as soon as the page loads
    document.addEventListener('DOMContentLoaded', fetchCryptoData);

    function fetchCryptoData() {
      fetch(`${window.location.origin}/coingecko/market_data`)
        .then(response => response.json())
        .then(data => displayData(data))
        .catch(error => console.error('Error fetching data:', error));
    }

    function displayData(data) {
      const output = document.getElementById('output');
      output.innerHTML = ''; // Clear previous content

      data.forEach(crypto => {
        const div = document.createElement('tr');
        div.innerHTML = `
          <td><img src="${crypto.image}" alt="${crypto.name}" width="20" height="20"></td>
          </td>${crypto.name}</td>
          <td>(${crypto.symbol.toUpperCase()})</td>
          <td>$${crypto.current_price}</td>
        `;
        output.appendChild(div);
      });
    }
  </script>

